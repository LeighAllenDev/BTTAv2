{% extends 'base.html' %} {% block content %}
<style>
    table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 20px;
}

th, td {
    text-align: left;
    padding: 8px;
    border-bottom: 1px solid #ddd;
}

.category-name {
    margin-top: 30px;
}

</style>
<section id="refreshments-hero">
  <div class="cover-text">
    <h2>Back to the Refreshments</h2>
    <h3>Little Energy Boosters while you're gaming</h3>
  </div>
</section>
<section class="description">
  <div>
    <div>
      <h2 class="subtitle">Refreshments</h2>
      <p>
        We have an in-house canteen that offers a selection of tasty treats to
        sustain you during your gaming sessions, with vegan options available on
        request.
      </p>
    </div>
  </div>
</section>
<section id="pricing">
  <div class="menu-container">
    <h3>Menu Overview</h3>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Price</th>
            </tr>
        </thead>
        <tbody>
            {% for category in categories %}
                <!-- Optional: Category as a header row -->
                <tr class="category-header">
                    <th colspan="3">{{ category.name }}</th>
                </tr>
                {% for item in category.menuitems.all %}
                    <!-- Assuming each item might have multiple options/sizes -->
                    {% for option in item.options.all %}
                        <tr>
                            <!-- Show item name and description only on the first option -->
                            {% if forloop.first %}
                                <td rowspan="{{ item.options.all.count }}">{{ item.name }}</td>
                                <td rowspan="{{ item.options.all.count }}">{{ item.description|safe }}</td>
                            {% endif %}
                            <td>Â£{{ option.price }} ({{ option.size }})</td>
                        </tr>
                    {% empty %}
                        <!-- If there are no options, just show the item without price/size -->
                        <tr>
                            <td>{{ item.name }}</td>
                            <td>{{ item.description }}</td>
                            <td>N/A</td>
                        </tr>
                    {% endfor %}
                {% empty %}
                    <tr>
                        <td colspan="3">No menu items available</td>
                    </tr>
                {% endfor %}
            {% empty %}
                <tr>
                    <td colspan="3">No categories available</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    
  </div>
</section>

{% endblock content %}
